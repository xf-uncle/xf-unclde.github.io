<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="SpringBoot">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringBoot">
<meta property="og:url" content="http://example.com/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/index.html">
<meta property="og:site_name" content="xf&#39;s blog">
<meta property="og:description" content="SpringBoot">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210508200407524.png">
<meta property="og:image" content="http://example.com/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210508201419578.png">
<meta property="og:image" content="http://example.com/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210508202037362.png">
<meta property="og:image" content="http://example.com/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210509154602078.png">
<meta property="og:image" content="http://example.com/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210509161555561.png">
<meta property="og:image" content="http://example.com/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210510164725539.png">
<meta property="og:image" content="http://example.com/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210510164803053.png">
<meta property="og:image" content="http://example.com/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210510165017635.png">
<meta property="og:image" content="http://example.com/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210512100401728.png">
<meta property="og:image" content="http://example.com/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210522113516528.png">
<meta property="og:image" content="http://example.com/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210522113644675.png">
<meta property="og:image" content="http://example.com/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210522184155648.png">
<meta property="og:image" content="http://example.com/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210523101457242.png">
<meta property="og:image" content="http://example.com/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210609162024689.png">
<meta property="article:published_time" content="2021-09-20T08:39:20.000Z">
<meta property="article:modified_time" content="2021-09-20T08:49:09.948Z">
<meta property="article:author" content="xf">
<meta property="article:tag" content="后端">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210508200407524.png">


<link rel="canonical" href="http://example.com/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/","path":"2021/09/20/开发/后端/SpringBoot/","title":"SpringBoot"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>SpringBoot | xf's blog</title>
  

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?50383950ce261bfae047ef555de05e48"></script>



  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">xf's blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1%E3%80%81%E7%AE%80%E4%BB%8B"><span class="nav-number">1.</span> <span class="nav-text">1、简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2%E3%80%81%E6%99%AE%E9%80%9Amaven%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91"><span class="nav-number">2.</span> <span class="nav-text">2、普通maven项目开发</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E8%AE%BE%E7%BD%AE%E7%88%B6%E9%A1%B9%E7%9B%AE"><span class="nav-number">2.1.</span> <span class="nav-text">1.设置父项目</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="nav-number">2.2.</span> <span class="nav-text">2.导入依赖</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E7%BC%96%E5%86%99%E5%90%AF%E5%8A%A8%E7%B1%BB"><span class="nav-number">2.3.</span> <span class="nav-text">3.编写启动类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E7%BC%96%E5%86%99%E4%B8%9A%E5%8A%A1"><span class="nav-number">2.4.</span> <span class="nav-text">4.编写业务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E8%BF%90%E8%A1%8C%E4%B8%BB%E7%A8%8B%E5%BA%8F-%E8%AE%BF%E9%97%AE%E5%AF%B9%E5%BA%94%E8%AF%B7%E6%B1%82"><span class="nav-number">2.5.</span> <span class="nav-text">5.运行主程序 访问对应请求</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE"><span class="nav-number">2.6.</span> <span class="nav-text">6.修改配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-%E7%AE%80%E5%8C%96%E9%83%A8%E7%BD%B2"><span class="nav-number">2.7.</span> <span class="nav-text">7.简化部署</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3%E3%80%81%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="nav-number">3.</span> <span class="nav-text">3、自动配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="nav-number">3.1.</span> <span class="nav-text">1.自动配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E9%BB%98%E8%AE%A4%E5%8C%85%E7%BB%93%E6%9E%84"><span class="nav-number">3.2.</span> <span class="nav-text">2.默认包结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE"><span class="nav-number">3.3.</span> <span class="nav-text">3.默认配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BD%E6%89%80%E6%9C%89%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="nav-number">3.4.</span> <span class="nav-text">4.按需加载所有自动配置项</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4%E3%80%81%E5%AE%B9%E5%99%A8%E5%8A%9F%E8%83%BD"><span class="nav-number">4.</span> <span class="nav-text">4、容器功能</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E7%BB%84%E4%BB%B6%E5%A2%9E%E5%8A%A0"><span class="nav-number">4.1.</span> <span class="nav-text">1.组件增加</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-Configuration"><span class="nav-number">4.1.1.</span> <span class="nav-text">1.1    @Configuration</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-Bean%E3%80%81-Component%E3%80%81-Controller%E3%80%81-Service%E3%80%81-Repository"><span class="nav-number">4.1.2.</span> <span class="nav-text">1.2    @Bean、@Component、@Controller、@Service、@Repository</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-ComponentScan%E3%80%81-Import"><span class="nav-number">4.1.3.</span> <span class="nav-text">1.3    @ComponentScan、@Import</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-Conditional"><span class="nav-number">4.1.4.</span> <span class="nav-text">1.4    @Conditional</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2%E3%80%81%E5%AF%BC%E5%85%A5spring%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">4.2.</span> <span class="nav-text">2、导入spring配置文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3%E3%80%81%E9%85%8D%E7%BD%AE%E7%BB%91%E5%AE%9A"><span class="nav-number">4.3.</span> <span class="nav-text">3、配置绑定</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5%E3%80%81%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86%E5%85%A5%E9%97%A8"><span class="nav-number">5.</span> <span class="nav-text">5、自动配置原理入门</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-SpringBootConfiguration"><span class="nav-number">5.1.</span> <span class="nav-text">1.@SpringBootConfiguration</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-ComponentScan"><span class="nav-number">5.2.</span> <span class="nav-text">2.@ComponentScan</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-EnableAutoConfiguration"><span class="nav-number">5.3.</span> <span class="nav-text">3.@EnableAutoConfiguration</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-AutoConfigurationPackage"><span class="nav-number">5.3.1.</span> <span class="nav-text">3.1.@AutoConfigurationPackage</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-Import-AutoConfigurationImportSelector-class"><span class="nav-number">5.3.2.</span> <span class="nav-text">3.2.@Import(AutoConfigurationImportSelector.class)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE"><span class="nav-number">5.4.</span> <span class="nav-text">4.修改默认配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E6%80%BB%E7%BB%93%EF%BC%9A"><span class="nav-number">5.5.</span> <span class="nav-text">5.总结：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="nav-number">5.6.</span> <span class="nav-text">6.最佳实践</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6%E3%80%81%E5%BC%80%E5%8F%91%E6%8A%80%E5%B7%A7"><span class="nav-number">6.</span> <span class="nav-text">6、开发技巧</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-lombok"><span class="nav-number">6.1.</span> <span class="nav-text">1.lombok</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-dev-tools"><span class="nav-number">6.2.</span> <span class="nav-text">2.dev-tools</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Spring-Initailizr%EF%BC%88%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96%E5%90%91%E5%AF%BC%EF%BC%89"><span class="nav-number">6.3.</span> <span class="nav-text">3.Spring Initailizr（项目初始化向导）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7%E3%80%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">7.</span> <span class="nav-text">7、配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-properties"><span class="nav-number">7.1.</span> <span class="nav-text">1.properties</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-yaml%E3%80%81yml"><span class="nav-number">7.2.</span> <span class="nav-text">2.yaml、yml</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-yaml%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95"><span class="nav-number">7.3.</span> <span class="nav-text">3.yaml基础语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-yaml%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">7.4.</span> <span class="nav-text">4.yaml数据类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E7%A4%BA%E4%BE%8B"><span class="nav-number">7.5.</span> <span class="nav-text">5.示例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E9%85%8D%E7%BD%AE%E6%8F%90%E7%A4%BA"><span class="nav-number">7.6.</span> <span class="nav-text">6.配置提示</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8%E3%80%81Web%E5%BC%80%E5%8F%91"><span class="nav-number">8.</span> <span class="nav-text">8、Web开发</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1%EF%BC%89%E7%AE%80%E5%8D%95%E5%8A%9F%E8%83%BD%E5%88%86%E6%9E%90"><span class="nav-number">8.1.</span> <span class="nav-text">1）简单功能分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE"><span class="nav-number">8.1.1.</span> <span class="nav-text">1.1.静态资源访问</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-%E4%BF%AE%E6%94%B9%E8%B5%84%E6%BA%90%E8%AE%BF%E9%97%AE%E8%B7%AF%E5%BE%84"><span class="nav-number">8.1.2.</span> <span class="nav-text">1.2.修改资源访问路径</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-webjars"><span class="nav-number">8.1.3.</span> <span class="nav-text">1.3.webjars</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-%E6%AC%A2%E8%BF%8E%E9%A1%B5%E6%94%AF%E6%8C%81"><span class="nav-number">8.1.4.</span> <span class="nav-text">1.4.欢迎页支持</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-5-%E8%87%AA%E5%AE%9A%E4%B9%89favicon-ico"><span class="nav-number">8.1.5.</span> <span class="nav-text">1.5.自定义favicon.ico</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-6-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86"><span class="nav-number">8.1.6.</span> <span class="nav-text">1.6.静态资源配置原理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2%EF%BC%89%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E5%A4%84%E7%90%86"><span class="nav-number">8.2.</span> <span class="nav-text">2）请求参数处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="nav-number">8.2.1.</span> <span class="nav-text">1.请求参数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1-rest%E4%BD%BF%E7%94%A8%E4%B8%8E%E5%8E%9F%E7%90%86"><span class="nav-number">8.2.1.1.</span> <span class="nav-text">1.1.rest使用与原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-%E5%8E%9F%E7%90%86"><span class="nav-number">8.2.1.2.</span> <span class="nav-text">1.2.原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-%E6%B3%A8%E8%A7%A3%E8%8E%B7%E5%8F%96%E5%8F%82%E6%95%B0"><span class="nav-number">8.2.1.3.</span> <span class="nav-text">1.3.注解获取参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-%E8%AE%BE%E7%BD%AE%E5%8F%AF%E4%BB%A5%E8%8E%B7%E5%8F%96%E8%B7%AF%E5%BE%84%E5%8F%98%E9%87%8F"><span class="nav-number">8.2.1.4.</span> <span class="nav-text">1.4.设置可以获取路径变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-5-%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E5%99%A8"><span class="nav-number">8.2.1.5.</span> <span class="nav-text">1.5.设置自定义的类型转换器</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3%EF%BC%89%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="nav-number">8.3.</span> <span class="nav-text">3）拦截器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%BC%96%E5%86%99%E6%8B%A6%E6%88%AA%E5%99%A8-%E5%AE%9E%E7%8E%B0HandlerInterceptor%E6%8E%A5%E5%8F%A3"><span class="nav-number">8.3.1.</span> <span class="nav-text">1.编写拦截器 实现HandlerInterceptor接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%B0%86%E6%8B%A6%E6%88%AA%E5%99%A8%E6%B3%A8%E5%86%8C%E5%88%B0%E5%AE%B9%E5%99%A8%E4%B8%AD"><span class="nav-number">8.3.2.</span> <span class="nav-text">2.将拦截器注册到容器中</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%8C%87%E5%AE%9A%E6%8B%A6%E6%88%AA%E8%A7%84%E5%88%99"><span class="nav-number">8.3.3.</span> <span class="nav-text">3.指定拦截规则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="nav-number">8.3.4.</span> <span class="nav-text">4.执行流程</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4%EF%BC%89%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="nav-number">8.4.</span> <span class="nav-text">4）文件上传</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%89%8D%E7%AB%AF%E7%BC%96%E5%86%99"><span class="nav-number">8.4.1.</span> <span class="nav-text">1.文件上传前端编写</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%90%8E%E7%AB%AF%E8%AF%B7%E6%B1%82%E6%B5%8B%E8%AF%95"><span class="nav-number">8.4.2.</span> <span class="nav-text">2.后端请求测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%96%87%E4%BB%B6%E4%BF%9D%E5%AD%98"><span class="nav-number">8.4.3.</span> <span class="nav-text">3.文件保存</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">8.4.4.</span> <span class="nav-text">4.出现的问题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5%EF%BC%89%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="nav-number">8.5.</span> <span class="nav-text">5）异常处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E9%BB%98%E8%AE%A4%E8%A7%84%E5%88%99"><span class="nav-number">8.5.1.</span> <span class="nav-text">1.默认规则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E9%94%99%E8%AF%AF%E9%85%8D%E7%BD%AE%E7%B1%BB"><span class="nav-number">8.5.2.</span> <span class="nav-text">2.错误配置类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8"><span class="nav-number">8.5.3.</span> <span class="nav-text">3.自定义异常</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6%EF%BC%89%E5%8E%9F%E7%94%9F%E7%BB%84%E4%BB%B6%E6%B3%A8%E5%85%A5"><span class="nav-number">8.6.</span> <span class="nav-text">6）原生组件注入</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#9%E3%80%81%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE"><span class="nav-number">9.</span> <span class="nav-text">9、数据访问</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E6%95%B0%E6%8D%AE%E9%85%8D%E7%BD%AE"><span class="nav-number">9.1.</span> <span class="nav-text">1.数据配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E4%BD%BF%E7%94%A8Druid%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="nav-number">9.2.</span> <span class="nav-text">2.使用Druid数据源</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%EF%BC%89druid%E5%AE%98%E6%96%B9%E5%9C%B0%E5%9D%80"><span class="nav-number">9.2.1.</span> <span class="nav-text">1）druid官方地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%EF%BC%89%E8%87%AA%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE"><span class="nav-number">9.2.2.</span> <span class="nav-text">2）自定义配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%EF%BC%89%E4%BD%BF%E7%94%A8start%E8%BF%9B%E8%A1%8C%E9%85%8D%E7%BD%AE"><span class="nav-number">9.2.3.</span> <span class="nav-text">2）使用start进行配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E6%95%B4%E5%90%88mybatis"><span class="nav-number">9.3.</span> <span class="nav-text">3.整合mybatis</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-mybatisPlus"><span class="nav-number">9.4.</span> <span class="nav-text">4.mybatisPlus</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5%E3%80%81redis"><span class="nav-number">9.5.</span> <span class="nav-text">5、redis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%EF%BC%89%E5%AF%BC%E5%85%A5%E4%BD%BF%E7%94%A8"><span class="nav-number">9.5.1.</span> <span class="nav-text">1）导入使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%EF%BC%89%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81"><span class="nav-number">9.5.2.</span> <span class="nav-text">2）测试代码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3%EF%BC%89%E5%88%87%E6%8D%A2%E8%87%B3jedis%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="nav-number">9.5.3.</span> <span class="nav-text">3）切换至jedis客户端</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4%EF%BC%89filter%E5%92%8Cinterceptor%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">9.5.4.</span> <span class="nav-text">4）filter和interceptor的区别</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#10%E3%80%81%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">10.</span> <span class="nav-text">10、遇到的问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1%EF%BC%89maven%E6%89%93%E5%8C%85%E5%A4%B1%E8%B4%A5"><span class="nav-number">10.1.</span> <span class="nav-text">1）maven打包失败</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#11%E3%80%81%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E7%94%A8"><span class="nav-number">11.</span> <span class="nav-text">11、服务器运用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1%EF%BC%89linux%E8%BF%90%E8%A1%8Cspringboot-jar%E5%8C%85%E9%A1%B9%E7%9B%AE"><span class="nav-number">11.1.</span> <span class="nav-text">1）linux运行springboot jar包项目</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2%EF%BC%89windows%E6%96%87%E4%BB%B6%E8%B5%8B%E5%80%BC%E5%88%B0linux%E8%BF%90%E8%A1%8C%E5%A4%B1%E8%B4%A5"><span class="nav-number">11.2.</span> <span class="nav-text">2）windows文件赋值到linux运行失败</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="xf"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">xf</p>
  <div class="site-description" itemprop="description">xf@github.io</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">22</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="xf">
      <meta itemprop="description" content="xf@github.io">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xf's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          SpringBoot
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2021-09-20 16:39:20 / 修改时间：16:49:09" itemprop="dateCreated datePublished" datetime="2021-09-20T16:39:20+08:00">2021-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">开发</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>SpringBoot</p>
<span id="more"></span>
<h1 id="1、简介"><a href="#1、简介" class="headerlink" title="1、简介"></a>1、简介</h1><p>文档地址：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//docs.spring.io/spring-boot/docs/current/reference/html/</span></span><br></pre></td></tr></table></figure>

<p>主要配置地址：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#common-application-properties</span></span><br></pre></td></tr></table></figure>



<h1 id="2、普通maven项目开发"><a href="#2、普通maven项目开发" class="headerlink" title="2、普通maven项目开发"></a>2、普通maven项目开发</h1><h2 id="1-设置父项目"><a href="#1-设置父项目" class="headerlink" title="1.设置父项目"></a>1.设置父项目</h2><p>父项目主要用来做依赖管理的</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 父项目的父项目</span></span><br><span class="line"><span class="comment">	主要用来进行版本控制</span></span><br><span class="line"><span class="comment">	几乎声明了所有开发中所有依赖的版本号</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">	对版本不满意可以自定义	修改可能会与其他jar包冲突</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mysql-version</span>&gt;</span>8.0.1<span class="tag">&lt;/<span class="name">mysql-version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>springboot所有场景：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter</span></span><br></pre></td></tr></table></figure>

<h2 id="2-导入依赖"><a href="#2-导入依赖" class="headerlink" title="2.导入依赖"></a>2.导入依赖</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-编写启动类"><a href="#3-编写启动类" class="headerlink" title="3.编写启动类"></a>3.编写启动类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * springboot的主启动类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BootStart</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//固定写法  开启应用</span></span><br><span class="line">        SpringApplication.run(BootStart.class,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-编写业务"><a href="#4-编写业务" class="headerlink" title="4.编写业务"></a>4.编写业务</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello!!!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-运行主程序-访问对应请求"><a href="#5-运行主程序-访问对应请求" class="headerlink" title="5.运行主程序 访问对应请求"></a>5.运行主程序 访问对应请求</h2><h2 id="6-修改配置"><a href="#6-修改配置" class="headerlink" title="6.修改配置"></a>6.修改配置</h2><p>在类路径下创建配置文件    一般使用：application.properties</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#修改服务器端口号</span></span><br><span class="line"><span class="meta">server.port</span>=<span class="string">6666</span></span><br></pre></td></tr></table></figure>

<h2 id="7-简化部署"><a href="#7-简化部署" class="headerlink" title="7.简化部署"></a>7.简化部署</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用maven打包即可    <strong>有的最新版打包有问题需要降低版本</strong></p>
<p>直接在cmd控制台运行jar包    **java -jar *.jar    **</p>
<p>注意点：</p>
<ul>
<li>取消掉cmd的快速编辑模式</li>
</ul>
<h1 id="3、自动配置"><a href="#3、自动配置" class="headerlink" title="3、自动配置"></a>3、自动配置</h1><h2 id="1-自动配置"><a href="#1-自动配置" class="headerlink" title="1.自动配置"></a>1.自动配置</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//获取到ioc容器</span></span><br><span class="line">        ConfigurableApplicationContext run = SpringApplication.run(MainApplication.class, args);</span><br><span class="line">        <span class="comment">//获得所有组件的名字</span></span><br><span class="line">        <span class="keyword">for</span> (String name : run.getBeanDefinitionNames()) &#123;</span><br><span class="line">            System.out.println(name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">通过查看发现加载了springmvc需要的东西：</span></span><br><span class="line"><span class="comment">	dispatcherServlet	</span></span><br><span class="line"><span class="comment">	characterEncodingFilter</span></span><br><span class="line"><span class="comment">	文件上传解析器</span></span><br><span class="line"><span class="comment">	视图解析器</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="2-默认包结构"><a href="#2-默认包结构" class="headerlink" title="2.默认包结构"></a>2.默认包结构</h2><img src="/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210508200407524.png" class="">

<p><strong>主程序所在的包及其下面所有的子包都会被扫描</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	可以通过修改主程序注解内的信息改变扫描的默认包</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@SpringBootApplication(scanBasePackages = &quot;edu.hbut&quot;)</span></span><br></pre></td></tr></table></figure>

<h2 id="3-默认配置"><a href="#3-默认配置" class="headerlink" title="3.默认配置"></a>3.默认配置</h2><p><strong>默认配置最终都是映射到某一个类上面,这个类会在容器中创建对象，然后可以通过这个对象获取对应的值</strong></p>
<img src="/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210508201419578.png" class="">

<h2 id="4-按需加载所有自动配置项"><a href="#4-按需加载所有自动配置项" class="headerlink" title="4.按需加载所有自动配置项"></a>4.按需加载所有自动配置项</h2><p>有多个starter</p>
<p>引入了哪些场景这个场景的自动配置才会开启</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- springboot的所有配置功能都在此包中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-autoconfigure<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210508202037362.png" class="">

<h1 id="4、容器功能"><a href="#4、容器功能" class="headerlink" title="4、容器功能"></a>4、容器功能</h1><h2 id="1-组件增加"><a href="#1-组件增加" class="headerlink" title="1.组件增加"></a>1.组件增加</h2><h3 id="1-1-Configuration"><a href="#1-1-Configuration" class="headerlink" title="1.1    @Configuration"></a>1.1    @Configuration</h3><p>以前的spring增加需要在配置文件中加入bean标签</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	springboot增加组件</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">    这个类默认就是一个组件</span></span><br><span class="line"><span class="comment">    配置类中注册的组件默认也是单例的</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">         会在ioc容器中放置这个组件</span></span><br><span class="line"><span class="comment">         组件id：方法名</span></span><br><span class="line"><span class="comment">         组件类型：返回值类型</span></span><br><span class="line"><span class="comment">         组件值：返回值</span></span><br><span class="line"><span class="comment">         可以通过<span class="doctag">@Bean</span>(&quot;a&quot;) 修改组件id为a</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">user</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(<span class="number">1</span>,<span class="string">&quot;小李子&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pet <span class="title">pet</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Pet(<span class="string">&quot;xx&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>@Configuration新属性</strong></p>
<img src="/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210509154602078.png" class="">

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  proxyBeanMethods 默认为   true</span></span><br><span class="line"><span class="comment"> *      这个属性为true就是会代理组件方法</span></span><br><span class="line"><span class="comment"> *          -   该配置类为代理类</span></span><br><span class="line"><span class="comment"> *          -   保证每个<span class="doctag">@Bean</span>方法创建的组件都是单例的</span></span><br><span class="line"><span class="comment"> *          -   <span class="doctag">@Bean</span>方法在调用时会去容器中查找  有就给你 没有就创建给你</span></span><br><span class="line"><span class="comment"> *      false</span></span><br><span class="line"><span class="comment"> *          -   该配置类为普通的类</span></span><br><span class="line"><span class="comment"> *          -   创建该类实例 每个<span class="doctag">@Bean</span>方法创建的对象都是新对象</span></span><br><span class="line"><span class="comment"> *          -   减少时间 - 调用方法不用去容器中找</span></span><br><span class="line"><span class="comment"> *  说明：仅仅是创建配置类调用该方法是新对象 容器中存的还是唯一的</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">user</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(<span class="number">1</span>,<span class="string">&quot;小李子&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pet <span class="title">pet</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Pet(<span class="string">&quot;xx&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//运行</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//获取到ioc容器</span></span><br><span class="line">        ConfigurableApplicationContext run = SpringApplication.run(MainApplication.class, args);</span><br><span class="line"></span><br><span class="line">        MyConfig config = run.getBean(MyConfig.class);</span><br><span class="line">        User user = config.user();</span><br><span class="line">        User user1 = config.user();</span><br><span class="line">		</span><br><span class="line">        System.out.println(user == user1);<span class="comment">//false	因为配置proxyBeanMethods为false</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 当两个类有依赖时，即user里有pet属性时</span></span><br><span class="line"><span class="comment">         * 这个时候proxyBeanMethods因当为true</span></span><br><span class="line"><span class="comment">         * 不然每次获取的不一样</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-2-Bean、-Component、-Controller、-Service、-Repository"><a href="#1-2-Bean、-Component、-Controller、-Service、-Repository" class="headerlink" title="1.2    @Bean、@Component、@Controller、@Service、@Repository"></a>1.2    @Bean、@Component、@Controller、@Service、@Repository</h3><h3 id="1-3-ComponentScan、-Import"><a href="#1-3-ComponentScan、-Import" class="headerlink" title="1.3    @ComponentScan、@Import"></a>1.3    @ComponentScan、@Import</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入其他类	有些第三方库中的对象想要拿到就可以导入</span></span><br><span class="line"><span class="comment">//默认组件的id为类的全限定名</span></span><br><span class="line"><span class="meta">@Import(&#123;User.class,Pet.class&#125;)</span>	</span><br></pre></td></tr></table></figure>

<h3 id="1-4-Conditional"><a href="#1-4-Conditional" class="headerlink" title="1.4    @Conditional"></a>1.4    @Conditional</h3><p><strong>条件装配    满足指定的条件才装配</strong></p>
<img src="/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210509161555561.png" class="">



<h2 id="2、导入spring配置文件"><a href="#2、导入spring配置文件" class="headerlink" title="2、导入spring配置文件"></a>2、导入spring配置文件</h2><p><strong>@ImportResource</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ImportResource(&quot;classpath:beans.xml&quot;)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;myUser&quot;</span> <span class="attr">class</span>=<span class="string">&quot;edu.hbut.pojo.User&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="3、配置绑定"><a href="#3、配置绑定" class="headerlink" title="3、配置绑定"></a>3、配置绑定</h2><p><strong>将配置文件中的值配置到对象中</strong></p>
<p>配置文件:</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#配置信息 - 注意文件编码设置为utf-8</span></span><br><span class="line"><span class="meta">cat.age</span>=<span class="string">18</span></span><br><span class="line"><span class="meta">cat.name</span>=<span class="string">汤姆</span></span><br></pre></td></tr></table></figure>

<p>类配置：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一	@Component + @ConfigurationProperties</span></span><br><span class="line"><span class="meta">@Component</span>	<span class="comment">//必须将这个类放入容器才能配置属性</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;cat&quot;)</span>	<span class="comment">//对应配置文件中的前缀</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Animals</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">	<span class="comment">//getter、setter、构造器...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式二	配置类@EnableConfigurationProperties + @ConfigurationProperties</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(&#123;Animals.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;cat&quot;)</span>	<span class="comment">//对应配置文件中的前缀</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Animals</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">	<span class="comment">//getter、setter、构造器...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：配置后组件的id为${prefix}-全限定名  即cat-edu.hbut.pojo.Animals</strong></p>
<h1 id="5、自动配置原理入门"><a href="#5、自动配置原理入门" class="headerlink" title="5、自动配置原理入门"></a>5、自动配置原理入门</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** SpringBootApplication */</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan(excludeFilters = &#123; @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),</span></span><br><span class="line"><span class="meta">		@Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SpringBootApplication &#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-SpringBootConfiguration"><a href="#1-SpringBootConfiguration" class="headerlink" title="1.@SpringBootConfiguration"></a>1.@SpringBootConfiguration</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>		<span class="comment">//这个注解代表这个类就是一个配置类</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SpringBootConfiguration &#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-ComponentScan"><a href="#2-ComponentScan" class="headerlink" title="2.@ComponentScan"></a>2.@ComponentScan</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//指定扫描哪些包	spring基础注解</span></span><br></pre></td></tr></table></figure>

<h2 id="3-EnableAutoConfiguration"><a href="#3-EnableAutoConfiguration" class="headerlink" title="3.@EnableAutoConfiguration"></a>3.@EnableAutoConfiguration</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AutoConfigurationPackage</span></span><br><span class="line"><span class="meta">@Import(AutoConfigurationImportSelector.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableAutoConfiguration &#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-1-AutoConfigurationPackage"><a href="#3-1-AutoConfigurationPackage" class="headerlink" title="3.1.@AutoConfigurationPackage"></a>3.1.@AutoConfigurationPackage</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import(AutoConfigurationPackages.Registrar.class)</span>	<span class="comment">//将该类放入容器中</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> AutoConfigurationPackage &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** AutoConfigurationPackages.Registrar */</span></span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Registrar</span> <span class="keyword">implements</span> <span class="title">ImportBeanDefinitionRegistrar</span>, <span class="title">DeterminableImports</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerBeanDefinitions</span><span class="params">(AnnotationMetadata metadata, BeanDefinitionRegistry registry)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//获得元注解的包名路径 - 这个时候标注在了springboot的主程序类上 </span></span><br><span class="line">        <span class="comment">//所以他会将主程序类所在的包中的注解全部扫描到 - 将其注册到容器中</span></span><br><span class="line">        register(registry, <span class="keyword">new</span> PackageImports(metadata).getPackageNames().toArray(<span class="keyword">new</span> String[<span class="number">0</span>]));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Set&lt;Object&gt; <span class="title">determineImports</span><span class="params">(AnnotationMetadata metadata)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Collections.singleton(<span class="keyword">new</span> PackageImports(metadata));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-Import-AutoConfigurationImportSelector-class"><a href="#3-2-Import-AutoConfigurationImportSelector-class" class="headerlink" title="3.2.@Import(AutoConfigurationImportSelector.class)"></a>3.2.@Import(AutoConfigurationImportSelector.class)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">1.通过selectImports方法中的getAutoConfigurationEntry方法	给容器中批量导入一些组件</span></span><br><span class="line"><span class="comment">2.通过getAutoConfigurationEntry方法中的getCandidateConfigurations 获得需要导入到容器中的配置类</span></span><br><span class="line"><span class="comment">3.通过getCandidateConfigurations。loadFactoryNames。loadSpringFactories获取到指定路径的资源</span></span><br><span class="line"><span class="comment">	路径：public static final String FACTORIES_RESOURCE_LOCATION = &quot;META-INF/spring.factories&quot;;</span></span><br><span class="line"><span class="comment">	加载每个包下的META-INF中spring.factories文件的信息</span></span><br><span class="line"><span class="comment">	主要是加载spring-boot-autoconfigure-2.3.4.RELEASE.jar/META-INF/spring.factories中的# Auto Configure</span></span><br><span class="line"><span class="comment">4.通过getAutoConfigurationEntry后续的一些方法将能加载的加载到容器中 - 有些被条件装配过滤了</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="4-修改默认配置"><a href="#4-修改默认配置" class="headerlink" title="4.修改默认配置"></a>4.修改默认配置</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 查看DispatcherServletAutoConfiguration类 */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span><span class="comment">//给容器中加入了文件上传解析器；</span></span><br><span class="line"><span class="meta">@ConditionalOnBean(MultipartResolver.class)</span>  <span class="comment">//容器中有这个类型组件</span></span><br><span class="line"><span class="comment">//容器中没有这个名字 multipartResolver 的组件</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(name = DispatcherServlet.MULTIPART_RESOLVER_BEAN_NAME)</span> </span><br><span class="line"><span class="function"><span class="keyword">public</span> MultipartResolver <span class="title">multipartResolver</span><span class="params">(MultipartResolver resolver)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//给@Bean标注的方法传入了对象参数，这个参数的值就会从容器中找。</span></span><br><span class="line">    <span class="comment">//SpringMVC multipartResolver。防止有些用户配置的文件上传解析器不符合规范</span></span><br><span class="line">    <span class="comment">// Detect if the user has created a MultipartResolver but named it incorrectly</span></span><br><span class="line">    <span class="keyword">return</span> resolver;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">解析：	</span></span><br><span class="line"><span class="comment">	当用户配置的MultipartResolver的名字不为multipartResolver就会执行</span></span><br><span class="line"><span class="comment">	将用户配置的放入此方法 这个时候就会再配置一个MultipartResolver 这个组件的id为multipartResolver</span></span><br><span class="line"><span class="comment">	检测用户是否创建了一个MultipartResolver但命名不正确</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>SpringBoot默认会在底层配好所有的组件。但是如果用户自己配置了以用户的优先</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="comment">//字符过滤器 先判断容器中是否有 没有才创建</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> CharacterEncodingFilter <span class="title">characterEncodingFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-总结："><a href="#5-总结：" class="headerlink" title="5.总结："></a>5.总结：</h2><ul>
<li><p>SpringBoot先加载所有的自动配置类  xxxxxAutoConfiguration</p>
</li>
<li><p>每个自动配置类按照条件进行生效，默认都会绑定配置文件指定的值。xxxxProperties里面拿。xxxProperties和配置文件进行了绑定</p>
</li>
<li><p>生效的配置类就会给容器中装配很多组件</p>
</li>
<li><p>只要容器中有这些组件，相当于这些功能就有了</p>
</li>
<li><p>定制化配置</p>
<ul>
<li>用户直接自己@Bean替换底层的组件</li>
<li>用户去看这个组件是获取的配置文件什么值就去修改。</li>
</ul>
</li>
</ul>
<p><strong>xxxxxAutoConfiguration —&gt; 组件  —&gt;</strong> <strong>xxxxProperties里面拿值  —-&gt; application.properties</strong></p>
<h2 id="6-最佳实践"><a href="#6-最佳实践" class="headerlink" title="6.最佳实践"></a>6.最佳实践</h2><ul>
<li><p>引入场景依赖</p>
<ul>
<li><code>https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter</code></li>
</ul>
</li>
<li><p>查看自己配置了哪些</p>
<ul>
<li>自己分析，通过查找源码找到一些自动配置类</li>
<li>配置文件中设置<strong>debug=true</strong>开启自动配置报告。Positive（生效）\ Negative（不生效）</li>
</ul>
</li>
<li><p>是否需要修改</p>
<ul>
<li><p>参照文档修改配置项</p>
<ul>
<li><code>https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#common-application-properties</code></li>
</ul>
</li>
<li><p>自己分析源码，找到<strong>Properties</strong>对应的属性修改</p>
</li>
</ul>
</li>
<li><p>自定义组件</p>
<ul>
<li>@Bean、@Component…</li>
</ul>
</li>
</ul>
<h1 id="6、开发技巧"><a href="#6、开发技巧" class="headerlink" title="6、开发技巧"></a>6、开发技巧</h1><h2 id="1-lombok"><a href="#1-lombok" class="headerlink" title="1.lombok"></a>1.lombok</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 添加依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 在插件仓库中找到对应的插件安装 重启即可 --&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span>				<span class="comment">//getter setter方法</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span>	<span class="comment">//无参构造器			</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span>	<span class="comment">//全参构造器</span></span><br><span class="line"><span class="meta">@ToString</span>			<span class="comment">//toString方法</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode</span>	<span class="comment">//equals和hashCode方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>日志信息</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span>			<span class="comment">//lombok注解	为类中创建一个Logger对象 可以打印日志</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;111&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello!!!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-dev-tools"><a href="#2-dev-tools" class="headerlink" title="2.dev-tools"></a>2.dev-tools</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 开发工具	需要按Ctrl+F9即重新Builder Project 然后会自动重启项目 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-Spring-Initailizr（项目初始化向导）"><a href="#3-Spring-Initailizr（项目初始化向导）" class="headerlink" title="3.Spring Initailizr（项目初始化向导）"></a>3.Spring Initailizr（项目初始化向导）</h2><p>新建</p>
<img src="/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210510164725539.png" class="">

<p>选择依赖</p>
<img src="/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210510164803053.png" class="">

<p>可以将git的文件删除</p>
<img src="/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210510165017635.png" class="">

<h1 id="7、配置文件"><a href="#7、配置文件" class="headerlink" title="7、配置文件"></a>7、配置文件</h1><h2 id="1-properties"><a href="#1-properties" class="headerlink" title="1.properties"></a>1.properties</h2><p>同以往的配置文件写法</p>
<h2 id="2-yaml、yml"><a href="#2-yaml、yml" class="headerlink" title="2.yaml、yml"></a>2.yaml、yml</h2><p>简介：</p>
<p>YAML 是 “YAML Ain’t Markup Language”（YAML 不是一种标记语言）的递归缩写。在开发的这种语言时，YAML 的意思其实是：”Yet Another Markup Language”（仍是一种标记语言）。 </p>
<p>非常适合用来做以数据为中心的配置文件</p>
<h2 id="3-yaml基础语法"><a href="#3-yaml基础语法" class="headerlink" title="3.yaml基础语法"></a>3.yaml基础语法</h2><ul>
<li>key: value；kv之间有空格</li>
<li>大小写敏感</li>
<li>使用缩进表示层级关系</li>
<li>缩进不允许使用tab，只允许空格</li>
<li>缩进的空格数不重要，只要相同层级的元素左对齐即可</li>
<li>‘#’表示注释</li>
<li>字符串无需加引号，如果要加，’ ‘与” “表示字符串内容 会被 转义/不转义</li>
</ul>
<h2 id="4-yaml数据类型"><a href="#4-yaml数据类型" class="headerlink" title="4.yaml数据类型"></a>4.yaml数据类型</h2><ul>
<li>字面量：单个的、不可再分的值。date、boolean、string、number、null</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">k:</span> <span class="string">v</span></span><br></pre></td></tr></table></figure>

<ul>
<li>对象：键值对的集合。map、hash、set、object </li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#行内写法：</span></span><br><span class="line"><span class="attr">k:</span> &#123;<span class="attr">k1:</span> <span class="string">v1</span>,<span class="attr">k2:</span> <span class="string">v2</span>,<span class="attr">k3:</span> <span class="string">v3</span>&#125;</span><br><span class="line"><span class="comment">#正常写法</span></span><br><span class="line"><span class="attr">k:</span></span><br><span class="line"> <span class="attr">k1:</span> <span class="string">v1</span></span><br><span class="line"> <span class="attr">k2:</span> <span class="string">v2</span></span><br><span class="line"> <span class="attr">k3:</span> <span class="string">v3</span></span><br></pre></td></tr></table></figure>

<ul>
<li>数组：一组按次序排列的值。array、list、queue</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#行内写法</span></span><br><span class="line"><span class="attr">k:</span> [<span class="string">v1</span>,<span class="string">v2</span>,<span class="string">v3</span>]</span><br><span class="line"><span class="comment">#正常写法</span></span><br><span class="line"><span class="attr">k:</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">v1</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">v2</span></span><br><span class="line"> <span class="bullet">-</span> <span class="string">v3</span></span><br></pre></td></tr></table></figure>

<h2 id="5-示例"><a href="#5-示例" class="headerlink" title="5.示例"></a>5.示例</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;person2&quot;)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> Boolean boss;</span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Pet pet;</span><br><span class="line">    <span class="keyword">private</span> String[] interests;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; animal;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; score;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;Double&gt; salarys;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, List&lt;Pet&gt;&gt; allPets;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//pet</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pet</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Double weight;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#对象1  普通写法</span></span><br><span class="line"><span class="attr">person:</span></span><br><span class="line">  <span class="attr">userName:</span> <span class="string">小李子</span></span><br><span class="line">  <span class="attr">boss:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">birth:</span> <span class="number">2021</span><span class="string">/5/11</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">18</span></span><br><span class="line">  <span class="attr">pet:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">狗狗</span></span><br><span class="line">    <span class="attr">weight:</span> <span class="number">180</span></span><br><span class="line">  <span class="attr">interests:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">111</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">222</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">333</span></span><br><span class="line">  <span class="attr">animal:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">狗</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">猫</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">鸡</span></span><br><span class="line">  <span class="attr">score:</span></span><br><span class="line">    <span class="attr">chinese:</span> <span class="number">1</span></span><br><span class="line">    <span class="attr">math:</span> <span class="number">2</span></span><br><span class="line">    <span class="attr">english:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">salarys:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">1</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">2</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">allPets:</span></span><br><span class="line">    <span class="attr">normal:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">普通1</span></span><br><span class="line">        <span class="attr">weight:</span> <span class="number">180</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">普通2</span></span><br><span class="line">        <span class="attr">weight:</span> <span class="number">188</span></span><br><span class="line">    <span class="attr">super:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">超级1</span></span><br><span class="line">        <span class="attr">weight:</span> <span class="number">222</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">超级2</span></span><br><span class="line">        <span class="attr">weight:</span> <span class="number">333</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#对象2  行内写法</span></span><br><span class="line"><span class="attr">person2:</span></span><br><span class="line">  <span class="attr">userName:</span> <span class="string">小王八</span></span><br><span class="line">  <span class="attr">boss:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">birth:</span> <span class="number">2021</span><span class="string">/5/11</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">18</span></span><br><span class="line">  <span class="attr">pet:</span> &#123;<span class="attr">name:</span> <span class="string">大狗子</span>,<span class="attr">weight:</span> <span class="number">111</span>&#125;</span><br><span class="line">  <span class="attr">interests:</span> [<span class="number">222</span>,<span class="number">444</span>,<span class="number">666</span>]</span><br><span class="line">  <span class="attr">animal:</span> [<span class="string">大狗</span>,<span class="string">大猫</span>]</span><br><span class="line">  <span class="attr">score:</span> &#123;<span class="attr">chinese:</span> <span class="number">11</span>,<span class="attr">math:</span> <span class="number">222</span>,<span class="attr">english:</span> <span class="number">333</span>&#125;</span><br><span class="line">  <span class="attr">salarys:</span> [<span class="number">33</span>,<span class="number">44</span>,<span class="number">55</span>]</span><br><span class="line">  <span class="attr">allPets:</span> &#123;<span class="string">normal:</span>[&#123;<span class="attr">name:</span> <span class="string">普通1</span>,<span class="attr">weight:</span> <span class="number">180</span>&#125;,&#123;<span class="attr">name:</span> <span class="string">普通2</span>,<span class="attr">weight:</span> <span class="number">188</span>&#125;],<span class="string">super:</span>[&#123;<span class="attr">name:</span> <span class="string">超级1</span>,<span class="attr">weight:</span> <span class="number">222</span>&#125;,&#123;<span class="attr">name:</span> <span class="string">超级2</span>,<span class="attr">weight:</span> <span class="number">333</span>&#125;]&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#&quot;&quot;不会转义 &#x27;&#x27;会转义 (转义转义字符)</span></span><br><span class="line"><span class="comment">#例：&quot;1\n2&quot; 即1换行2		&#x27;1\n2&#x27; 即1\n2</span></span><br></pre></td></tr></table></figure>

<h2 id="6-配置提示"><a href="#6-配置提示" class="headerlink" title="6.配置提示"></a>6.配置提示</h2><p><strong>将项目增加配置处理器依赖</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 因为这个jar包对于程序运行没用 只有编译期间方便 添加打包排除 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclude</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="8、Web开发"><a href="#8、Web开发" class="headerlink" title="8、Web开发"></a>8、Web开发</h1><h2 id="1）简单功能分析"><a href="#1）简单功能分析" class="headerlink" title="1）简单功能分析"></a>1）简单功能分析</h2><h3 id="1-1-静态资源访问"><a href="#1-1-静态资源访问" class="headerlink" title="1.1.静态资源访问"></a>1.1.静态资源访问</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 将静态资源放在这些文件夹下都能通过资源名直接访问</span></span><br><span class="line"><span class="comment">	访问：当前项目根路径/ + 静态资源名</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">/<span class="keyword">static</span></span><br><span class="line">/<span class="keyword">public</span></span><br><span class="line">/resources</span><br><span class="line">/META-INF/resources</span><br><span class="line">    </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">原理：静态映射：/**</span></span><br><span class="line"><span class="comment">请求进来，默认会先去找controller看有没有能处理的，没有处理的的就交给静态资源处理器，静态资源也找不到就404</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="1-2-修改资源访问路径"><a href="#1-2-修改资源访问路径" class="headerlink" title="1.2.修改资源访问路径"></a>1.2.修改资源访问路径</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#配置springmvc静态资源的访问路径 可以和拦截器配合  默认拦截所有就会将静态资源拦截</span></span><br><span class="line"><span class="comment">#当前项目 + static-path-pattern + 静态资源名 = 静态资源文件夹下找</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mvc:</span></span><br><span class="line">    <span class="attr">static-path-pattern:</span> <span class="string">/resources/**</span></span><br><span class="line"><span class="comment">#配置spring静态资源的路径为classpath:/aaa/  默认是classpath:/static/ classpath:/public/...</span></span><br><span class="line"><span class="comment">#静态资源只找这个路径</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">static-locations:</span> [<span class="string">classpath:/aaa/</span>]</span><br></pre></td></tr></table></figure>

<h3 id="1-3-webjars"><a href="#1-3-webjars" class="headerlink" title="1.3.webjars"></a>1.3.webjars</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">	自动映射 /webjars/**</span></span><br><span class="line"><span class="comment">	网址：https://www.webjars.org/</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.webjars<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jquery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 访问地址：http://localhost:8080/webjars/jquery/3.5.1/jquery.js   后面地址要按照依赖里面的包路径 --&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210512100401728.png" class="">

<p><strong>访问webjars就会去classpath:/META-INF/resources/webjars/里面找 配置了spring.resources.static-locations没有影响</strong> </p>
<h3 id="1-4-欢迎页支持"><a href="#1-4-欢迎页支持" class="headerlink" title="1.4.欢迎页支持"></a>1.4.欢迎页支持</h3><ul>
<li>静态资源路径下的 index.html<ul>
<li>可以配置静态资源路径</li>
<li>但是<strong>不可以配置静态资源的访问前缀。否则导致 index.html不能被默认访问</strong></li>
</ul>
</li>
<li>处理/index的controller</li>
</ul>
<h3 id="1-5-自定义favicon-ico"><a href="#1-5-自定义favicon-ico" class="headerlink" title="1.5.自定义favicon.ico"></a>1.5.自定义favicon.ico</h3><p>favicon.ico 放在静态资源目录下即可。<strong>必须是这个名字</strong></p>
<p><strong>配置静态资源的访问前缀，会导致favicon.ico访问不到</strong></p>
<h3 id="1-6-静态资源配置原理"><a href="#1-6-静态资源配置原理" class="headerlink" title="1.6.静态资源配置原理"></a>1.6.静态资源配置原理</h3><ul>
<li><p>SpringBoot启动默认加载  xxxAutoConfiguration 类（自动配置类）</p>
</li>
<li><p>SpringMVC功能的自动配置类 <strong>WebMvcAutoConfiguration</strong>，生效</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment">WebMvcAutoConfiguration 中的一个静态配置类</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@Import(EnableWebMvcConfiguration.class)</span></span><br><span class="line"><span class="comment">/** 开启配置属性 与配置文件进行绑定</span></span><br><span class="line"><span class="comment">WebMvcProperties -  spring.mvc</span></span><br><span class="line"><span class="comment">ResourceProperties - spring.resources</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(&#123; WebMvcProperties.class, ResourceProperties.class &#125;)</span></span><br><span class="line"><span class="meta">@Order(0)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">WebMvcAutoConfigurationAdapter</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	这个配置类只有一个有参构造 那么参数就会去容器中找</span></span><br><span class="line"><span class="comment">	ResourceProperties resourceProperties；获取和spring.resources绑定的所有的值的对象</span></span><br><span class="line"><span class="comment">	WebMvcProperties mvcProperties 获取和spring.mvc绑定的所有的值的对象</span></span><br><span class="line"><span class="comment">	ListableBeanFactory beanFactory Spring的beanFactory</span></span><br><span class="line"><span class="comment">	HttpMessageConverters 找到所有的HttpMessageConverters</span></span><br><span class="line"><span class="comment">	ResourceHandlerRegistrationCustomizer 找到 资源处理器的自定义器。=========</span></span><br><span class="line"><span class="comment">	DispatcherServletPath  </span></span><br><span class="line"><span class="comment">	ServletRegistrationBean   给应用注册Servlet、Filter....</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">WebMvcAutoConfigurationAdapter</span><span class="params">(ResourceProperties resourceProperties, WebMvcProperties mvcProperties,</span></span></span><br><span class="line"><span class="params"><span class="function">				ListableBeanFactory beanFactory, ObjectProvider&lt;HttpMessageConverters&gt; messageConvertersProvider,</span></span></span><br><span class="line"><span class="params"><span class="function">				ObjectProvider&lt;ResourceHandlerRegistrationCustomizer&gt; resourceHandlerRegistrationCustomizerProvider,</span></span></span><br><span class="line"><span class="params"><span class="function">				ObjectProvider&lt;DispatcherServletPath&gt; dispatcherServletPath,</span></span></span><br><span class="line"><span class="params"><span class="function">				ObjectProvider&lt;ServletRegistrationBean&lt;?&gt;&gt; servletRegistrations)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.resourceProperties = resourceProperties;</span><br><span class="line">			<span class="keyword">this</span>.mvcProperties = mvcProperties;</span><br><span class="line">			<span class="keyword">this</span>.beanFactory = beanFactory;</span><br><span class="line">			<span class="keyword">this</span>.messageConvertersProvider = messageConvertersProvider;</span><br><span class="line">			<span class="keyword">this</span>.resourceHandlerRegistrationCustomizer = resourceHandlerRegistrationCustomizerProvider.getIfAvailable();</span><br><span class="line">			<span class="keyword">this</span>.dispatcherServletPath = dispatcherServletPath;</span><br><span class="line">			<span class="keyword">this</span>.servletRegistrations = servletRegistrations;</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>

<p><strong>资源处理规则</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//设置spring:resources:add-mappings: false 就会将默认的资源处理器关闭</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.resourceProperties.isAddMappings()) &#123;</span><br><span class="line">        logger.debug(<span class="string">&quot;Default resource handling disabled&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//静态资源缓存</span></span><br><span class="line">    Duration cachePeriod = <span class="keyword">this</span>.resourceProperties.getCache().getPeriod();</span><br><span class="line">    CacheControl cacheControl = <span class="keyword">this</span>.resourceProperties.getCache().getCachecontrol().toHttpCacheControl();</span><br><span class="line">    <span class="comment">//webjars映射规则 你访问的是/webjars/aa.txt 那么就会去找classpath:/META-INF/resources/webjars/aa.txt</span></span><br><span class="line">    <span class="keyword">if</span> (!registry.hasMappingForPattern(<span class="string">&quot;/webjars/**&quot;</span>)) &#123;</span><br><span class="line">        customizeResourceHandlerRegistration(registry.addResourceHandler(<span class="string">&quot;/webjars/**&quot;</span>)</span><br><span class="line">                                             .addResourceLocations(<span class="string">&quot;classpath:/META-INF/resources/webjars/&quot;</span>)</span><br><span class="line">                                             .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//静态资源映射规则</span></span><br><span class="line">    String staticPathPattern = <span class="keyword">this</span>.mvcProperties.getStaticPathPattern();</span><br><span class="line">    <span class="keyword">if</span> (!registry.hasMappingForPattern(staticPathPattern)) &#123;</span><br><span class="line">        customizeResourceHandlerRegistration(registry.addResourceHandler(staticPathPattern)</span><br><span class="line">                                             .addResourceLocations(getResourceLocations(<span class="keyword">this</span>.resourceProperties.getStaticLocations()))</span><br><span class="line">                                             .setCachePeriod(getSeconds(cachePeriod)).setCacheControl(cacheControl));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>欢迎页处理</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  HandlerMapping：处理器映射。保存了每一个Handler能处理哪些请求。</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> WelcomePageHandlerMapping <span class="title">welcomePageHandlerMapping</span><span class="params">(ApplicationContext applicationContext,</span></span></span><br><span class="line"><span class="params"><span class="function">                                                           FormattingConversionService mvcConversionService, ResourceUrlProvider mvcResourceUrlProvider)</span> </span>&#123;</span><br><span class="line">    WelcomePageHandlerMapping welcomePageHandlerMapping = <span class="keyword">new</span> WelcomePageHandlerMapping(</span><br><span class="line">        <span class="keyword">new</span> TemplateAvailabilityProviders(applicationContext), applicationContext, getWelcomePage(),</span><br><span class="line">        <span class="keyword">this</span>.mvcProperties.getStaticPathPattern());</span><br><span class="line">    welcomePageHandlerMapping.setInterceptors(getInterceptors(mvcConversionService, mvcResourceUrlProvider));</span><br><span class="line">    welcomePageHandlerMapping.setCorsConfigurations(getCorsConfigurations());</span><br><span class="line">    <span class="keyword">return</span> welcomePageHandlerMapping;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//构造器</span></span><br><span class="line">WelcomePageHandlerMapping(TemplateAvailabilityProviders templateAvailabilityProviders,</span><br><span class="line">                          ApplicationContext applicationContext, Optional&lt;Resource&gt; welcomePage, String staticPathPattern) &#123;</span><br><span class="line">    <span class="comment">//如果存在欢迎页并且配置的staticPathPattern为默认的/** 那么就会跳转到欢迎页</span></span><br><span class="line">    <span class="keyword">if</span> (welcomePage.isPresent() &amp;&amp; <span class="string">&quot;/**&quot;</span>.equals(staticPathPattern)) &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;Adding welcome page: &quot;</span> + welcomePage.get());</span><br><span class="line">        setRootViewName(<span class="string">&quot;forward:index.html&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//否则就跳转到index请求</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (welcomeTemplateExists(templateAvailabilityProviders, applicationContext)) &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;Adding welcome page template: index&quot;</span>);</span><br><span class="line">        setRootViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>favicon</strong></p>
<p>浏览器默认就会发送请求去找网页图标 /favicon.ico</p>
<h2 id="2）请求参数处理"><a href="#2）请求参数处理" class="headerlink" title="2）请求参数处理"></a>2）请求参数处理</h2><h3 id="1-请求参数"><a href="#1-请求参数" class="headerlink" title="1.请求参数"></a>1.请求参数</h3><h4 id="1-1-rest使用与原理"><a href="#1-1-rest使用与原理" class="headerlink" title="1.1.rest使用与原理"></a>1.1.rest使用与原理</h4><ul>
<li><p>@xxxMapping；</p>
</li>
<li><p>Rest风格支持（使用HTTP请求方式动词来表示对资源的操作）</p>
<ul>
<li>以前：<code>/getUser 获取用户   /deleteUser 删除用户   /editUser  修改用户    /saveUser 保存用户</code></li>
<li>现在： <code>/user   GET-获取用户   DELETE-删除用户   PUT-修改用户    POST-保存用户</code></li>
<li>核心Filter；<code>HiddenHttpMethodFilter</code></li>
</ul>
</li>
<li><p>用法： </p>
<ul>
<li>表单<code>method=post</code>，隐藏域<code> _method=put</code></li>
<li>SpringBoot中需要手动开启</li>
</ul>
</li>
<li><p>扩展：如何把_method 这个名字换成我们自己喜欢的。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;GET - USER&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@PostMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">postUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;POST - USER&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@DeleteMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">deleteUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;DELETE - USER&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@PutMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">putUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;PUT - USER&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(HiddenHttpMethodFilter.class)</span>	<span class="comment">//容器中没有</span></span><br><span class="line"><span class="comment">//配置文件中spring.mvc.hiddenmethod.filter.enabled需要设置 默认不写是false</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty(prefix = &quot;spring.mvc.hiddenmethod.filter&quot;, name = &quot;enabled&quot;, matchIfMissing = false)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> OrderedHiddenHttpMethodFilter <span class="title">hiddenHttpMethodFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> OrderedHiddenHttpMethodFilter();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 自定义hiddenHttpMethodFilter并且提交参数为 my_method*/</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> HiddenHttpMethodFilter <span class="title">hiddenHttpMethodFilter</span><span class="params">()</span></span>&#123;</span><br><span class="line">    HiddenHttpMethodFilter filter = <span class="keyword">new</span> HiddenHttpMethodFilter();</span><br><span class="line">    filter.setMethodParam(<span class="string">&quot;my_method&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> filter;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-2-原理"><a href="#1-2-原理" class="headerlink" title="1.2.原理"></a>1.2.原理</h4><p>doGet、doPost-》doService-》doDispatch</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Determine handler for the current request.</span></span><br><span class="line"><span class="comment">//处理请求映射的方法</span></span><br><span class="line">mappedHandler = getHandler(processedRequest);</span><br></pre></td></tr></table></figure>

<h4 id="1-3-注解获取参数"><a href="#1-3-注解获取参数" class="headerlink" title="1.3.注解获取参数"></a>1.3.注解获取参数</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** <span class="doctag">@PathVariable</span>		restful风格匹配路径变量  */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/user/&#123;username&#125;/login/&#123;password&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title">login</span><span class="params">(<span class="meta">@PathVariable(&quot;username&quot;)</span> String username,</span></span></span><br><span class="line"><span class="params"><span class="function">                                <span class="meta">@PathVariable(&quot;password&quot;)</span> String password,</span></span></span><br><span class="line"><span class="params"><span class="function">                                //获取全部放入map中 泛型必须是String,String</span></span></span><br><span class="line"><span class="params"><span class="function">                                <span class="meta">@PathVariable</span> Map&lt;String,String&gt; allData)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;username&quot;</span>,username);</span><br><span class="line">    map.put(<span class="string">&quot;password&quot;</span>,password);</span><br><span class="line">    map.put(<span class="string">&quot;data&quot;</span>,allData);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** <span class="doctag">@RequestHeader</span> 获得请求头的信息 */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/header&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title">header</span><span class="params">(<span class="meta">@RequestHeader(&quot;User-Agent&quot;)</span> String agent,</span></span></span><br><span class="line"><span class="params"><span class="function">                                 //获取全部 下面<span class="number">3</span>个都是</span></span></span><br><span class="line"><span class="params"><span class="function">                                 <span class="meta">@RequestHeader</span> Map&lt;String,String&gt; allMap,</span></span></span><br><span class="line"><span class="params"><span class="function">                                 <span class="meta">@RequestHeader</span> HttpHeaders allHeaders,</span></span></span><br><span class="line"><span class="params"><span class="function">                                 <span class="meta">@RequestHeader</span> MultiValueMap&lt;String, String&gt; allMVMap)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;User-Agent&quot;</span>,agent);</span><br><span class="line">    map.put(<span class="string">&quot;data1&quot;</span>,allMap);</span><br><span class="line">    map.put(<span class="string">&quot;data2&quot;</span>,allHeaders);</span><br><span class="line">    map.put(<span class="string">&quot;data3&quot;</span>,allMVMap);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** <span class="doctag">@RequestParam</span>		获取指定的提交数据 */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/param&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title">paramRequest</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span> String username,</span></span></span><br><span class="line"><span class="params"><span class="function">                                       <span class="meta">@RequestParam(&quot;password&quot;)</span> String pwd,</span></span></span><br><span class="line"><span class="params"><span class="function">                                       //获取全部提交数据</span></span></span><br><span class="line"><span class="params"><span class="function">                                       <span class="meta">@RequestParam</span> Map&lt;String, String&gt; allMap,</span></span></span><br><span class="line"><span class="params"><span class="function">                                       <span class="meta">@RequestParam</span> MultiValueMap&lt;String, String&gt; allMV)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;username&quot;</span>,username);</span><br><span class="line">    map.put(<span class="string">&quot;password&quot;</span>,pwd);</span><br><span class="line">    map.put(<span class="string">&quot;allMap&quot;</span>,allMap);</span><br><span class="line">    map.put(<span class="string">&quot;allMV&quot;</span>,allMV);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**  <span class="doctag">@CookieValue</span>		获得指定Cookie的值 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** <span class="doctag">@RequestBody</span>	获取请求的所有数据 */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/body&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String,Object&gt; <span class="title">bodyRequest</span><span class="params">(<span class="meta">@RequestBody</span> String content)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="comment">//username=11&amp;password=222</span></span><br><span class="line">    map.put(<span class="string">&quot;body&quot;</span>,content);</span><br><span class="line">    <span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** <span class="doctag">@RequestAttribute</span> 	获取请求域中的信息 也可以通过HttpServletRequest获得*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	当cookie被禁用时这个时候就无法访问到session	response.encodeURL(&quot;xxx&quot;)会判断然后将url重写</span></span><br><span class="line"><span class="comment">	response.encodeURL</span></span><br><span class="line"><span class="comment">		先判断Web 组件是否启用 Session，假如没有，直接返回参数 url。</span></span><br><span class="line"><span class="comment">		再判断客户端浏览器是否支持 Cookie，假如支持，直接返回参数 url；</span></span><br><span class="line"><span class="comment">			假如不支持 ，就在参数 url 中加入 Session ID 信息，然后返回修改后的 url。</span></span><br><span class="line"><span class="comment">         例：http://localhost:8080/test;JSESSIONID=fjsdklafjdsfsldkafjlsf   </span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">	<span class="doctag">@MatrixVariable</span>	矩阵变量 可以获取到路径重写的值 只能和路径变量一起用</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="1-4-设置可以获取路径变量"><a href="#1-4-设置可以获取路径变量" class="headerlink" title="1.4.设置可以获取路径变量"></a>1.4.设置可以获取路径变量</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">在WebMvcAutoConfiguration（实现WebMvcConfigurer接口）中会配置configurePathMatch里面有一个UrlPathHelper</span></span><br><span class="line"><span class="comment">它会用来处理路径映射	所以我们应该重写一个WebMvcConfigurer实现类放入容器然后重写configurePathMatch方法返回一个自定义</span></span><br><span class="line"><span class="comment">UrlPathHelper 设置这个属性为false就可以获取</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">如果设置”;“(分号)内容应该从请求URI中剥离。</span></span><br><span class="line"><span class="comment"> * Set if &quot;;&quot; (semicolon) content should be stripped from the request URI.</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Default is &quot;true&quot;.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRemoveSemicolonContent</span><span class="params">(<span class="keyword">boolean</span> removeSemicolonContent)</span> </span>&#123;</span><br><span class="line">   checkReadOnly();</span><br><span class="line">   <span class="keyword">this</span>.removeSemicolonContent = removeSemicolonContent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//放入自定义的WebMvcConfigurer</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> WebMvcConfigurer <span class="title">webMvcConfigurer</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> WebMvcConfigurer() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configurePathMatch</span><span class="params">(PathMatchConfigurer configurer)</span> </span>&#123;</span><br><span class="line">            UrlPathHelper pathHelper = <span class="keyword">new</span> UrlPathHelper();</span><br><span class="line">            pathHelper.setRemoveSemicolonContent(<span class="keyword">false</span>);</span><br><span class="line">            configurer.setUrlPathHelper(pathHelper);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//请求实现</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/user/&#123;id&#125;/&#123;employee&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">matrixTest</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id,</span></span></span><br><span class="line"><span class="params"><span class="function">                                      //pathVar对应路径变量的名字,name对应矩阵的名字</span></span></span><br><span class="line"><span class="params"><span class="function">                                      <span class="meta">@MatrixVariable(pathVar = &quot;id&quot;,name = &quot;name&quot;)</span> String name,</span></span></span><br><span class="line"><span class="params"><span class="function">                                      <span class="meta">@PathVariable(&quot;employee&quot;)</span> String employee,</span></span></span><br><span class="line"><span class="params"><span class="function">                                      <span class="meta">@MatrixVariable(pathVar = &quot;employee&quot;,name = &quot;name&quot;)</span> List&lt;String&gt; eName)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;id&quot;</span>,id);</span><br><span class="line">    map.put(<span class="string">&quot;matrix_name&quot;</span>,name);</span><br><span class="line">    map.put(<span class="string">&quot;employee&quot;</span>,employee);</span><br><span class="line">    map.put(<span class="string">&quot;matrix_employee&quot;</span>,eName);</span><br><span class="line">    <span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	例子：</span></span><br><span class="line"><span class="comment">		http://localhost:8080/user/1;name=小李子/技术部;name=技1,name=技2,name=技3</span></span><br><span class="line"><span class="comment">		http://localhost:8080/user/1;name=小李子/技术部;name=技1,技2,技3</span></span><br><span class="line"><span class="comment">		</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="1-5-设置自定义的类型转换器"><a href="#1-5-设置自定义的类型转换器" class="headerlink" title="1.5.设置自定义的类型转换器"></a>1.5.设置自定义的类型转换器</h4><p>案例:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Animals</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Info info;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Info</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/animals&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Animals <span class="title">animals</span><span class="params">(Animals animals)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> animals;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//默认情况下是这样</span></span><br><span class="line">&lt;form action=<span class="string">&quot;/animals&quot;</span> method=<span class="string">&quot;get&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;小狗&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;age&quot;</span> value=<span class="string">&quot;18&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;info.id&quot;</span> value=<span class="string">&quot;66&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;info.address&quot;</span> value=<span class="string">&quot;湖北&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//我们觉得这样太麻烦 我想另一种方式也能提交</span></span><br><span class="line">&lt;form action=<span class="string">&quot;/animals&quot;</span> method=<span class="string">&quot;get&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;小狗&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;age&quot;</span> value=<span class="string">&quot;18&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;info&quot;</span> value=<span class="string">&quot;66;湖北&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"><span class="comment">//这个时候提交一定报错</span></span><br><span class="line"><span class="comment">//我们需要添加类型转换配置</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WebMvcConfigurer <span class="title">webMvcConfigurer</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//在容器中放入webmvc配置类</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> WebMvcConfigurer() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configurePathMatch</span><span class="params">(PathMatchConfigurer configurer)</span> </span>&#123;</span><br><span class="line">            <span class="comment">//配置矩阵变量使用</span></span><br><span class="line">            UrlPathHelper pathHelper = <span class="keyword">new</span> UrlPathHelper();</span><br><span class="line">            pathHelper.setRemoveSemicolonContent(<span class="keyword">false</span>);</span><br><span class="line">            configurer.setUrlPathHelper(pathHelper);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFormatters</span><span class="params">(FormatterRegistry registry)</span> </span>&#123;</span><br><span class="line">            <span class="comment">//配置类型转换器</span></span><br><span class="line">            <span class="comment">//可以将String类型转换为Info类型</span></span><br><span class="line">            registry.addConverter((Converter&lt;String, Info&gt;) source -&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (!StringUtils.isEmpty(source))&#123;</span><br><span class="line">                    Info info = <span class="keyword">new</span> Info();</span><br><span class="line">                    String[] infos = source.split(<span class="string">&quot;;&quot;</span>);</span><br><span class="line">                    info.setId(Integer.parseInt(infos[<span class="number">0</span>]));</span><br><span class="line">                    info.setAddress(infos[<span class="number">1</span>]);</span><br><span class="line">                    <span class="keyword">return</span> info;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3）拦截器"><a href="#3）拦截器" class="headerlink" title="3）拦截器"></a>3）拦截器</h2><h3 id="1-编写拦截器-实现HandlerInterceptor接口"><a href="#1-编写拦截器-实现HandlerInterceptor接口" class="headerlink" title="1.编写拦截器 实现HandlerInterceptor接口"></a>1.编写拦截器 实现HandlerInterceptor接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String uri = request.getRequestURI();</span><br><span class="line">        log.info(<span class="string">&quot;preHandle处理,路径是：&#123;&#125;，handler：&#123;&#125;&quot;</span>,uri,handler);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;postHandle，ModelAndView：&#123;&#125;&quot;</span>,modelAndView);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;afterCompletion处理，ex：&#123;&#125;&quot;</span>,ex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-将拦截器注册到容器中"><a href="#2-将拦截器注册到容器中" class="headerlink" title="2.将拦截器注册到容器中"></a>2.将拦截器注册到容器中</h3><p>通过配置类(实现WebMvcConfig接口)对应方法进行注册</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InterceptorConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> TestInterceptor());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-指定拦截规则"><a href="#3-指定拦截规则" class="headerlink" title="3.指定拦截规则"></a>3.指定拦截规则</h3><p>拦截所有也会拦截静态资源</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InterceptorConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addInterceptor(<span class="keyword">new</span> TestInterceptor())</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/**&quot;</span>)             <span class="comment">//拦截所有 包括静态资源</span></span><br><span class="line">                .excludePathPatterns(<span class="string">&quot;/animals&quot;</span>);    <span class="comment">//排除拦截</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210522113516528.png" class="">

<h3 id="4-执行流程"><a href="#4-执行流程" class="headerlink" title="4.执行流程"></a>4.执行流程</h3><img src="/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210522113644675.png" class="">

<h2 id="4）文件上传"><a href="#4）文件上传" class="headerlink" title="4）文件上传"></a>4）文件上传</h2><h3 id="1-文件上传前端编写"><a href="#1-文件上传前端编写" class="headerlink" title="1.文件上传前端编写"></a>1.文件上传前端编写</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 文件上传必须为post请求 且enctype为multipart/form-data --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/upload&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">            用户名:</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">            密码:</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        单文件上传：</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;one&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 多个文件上传需要设置multiple --&gt;</span></span><br><span class="line">        多文件上传：</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;many&quot;</span> <span class="attr">multiple</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-后端请求测试"><a href="#2-后端请求测试" class="headerlink" title="2.后端请求测试"></a>2.后端请求测试</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">fileUpload</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span> String username,</span></span></span><br><span class="line"><span class="params"><span class="function">                           <span class="meta">@RequestParam(&quot;password&quot;)</span> String password,</span></span></span><br><span class="line"><span class="params"><span class="function">                           <span class="meta">@RequestPart(&quot;one&quot;)</span>MultipartFile multipartFile,</span></span></span><br><span class="line"><span class="params"><span class="function">                           <span class="meta">@RequestPart(&quot;many&quot;)</span>MultipartFile[] many)</span></span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;username=&#123;&#125;,password=&#123;&#125;,one=&#123;&#125;,many=&#123;&#125;&quot;</span>,</span><br><span class="line">                username,password,multipartFile.getSize(),many.length);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-文件保存"><a href="#3-文件保存" class="headerlink" title="3.文件保存"></a>3.文件保存</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">fileUpload</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span> String username,</span></span></span><br><span class="line"><span class="params"><span class="function">                       <span class="meta">@RequestParam(&quot;password&quot;)</span> String password,</span></span></span><br><span class="line"><span class="params"><span class="function">                         <span class="comment">/** 文件上传对应的请求注解 */</span></span></span></span><br><span class="line"><span class="params"><span class="function">                       <span class="meta">@RequestPart(&quot;one&quot;)</span>MultipartFile multipartFile,</span></span></span><br><span class="line"><span class="params"><span class="function">                       <span class="meta">@RequestPart(&quot;many&quot;)</span>MultipartFile[] many)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;username=&#123;&#125;,password=&#123;&#125;,one=&#123;&#125;,many=&#123;&#125;&quot;</span>,</span><br><span class="line">            username,password,multipartFile.getSize(),many.length);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (!multipartFile.isEmpty())&#123;</span><br><span class="line">        <span class="comment">//处理同名文件</span></span><br><span class="line">        String filename = UUID.randomUUID().toString();</span><br><span class="line">        String fileOriginalFilename = multipartFile.getOriginalFilename();</span><br><span class="line">        String fileType = fileOriginalFilename.substring(fileOriginalFilename.lastIndexOf(<span class="string">&#x27;.&#x27;</span>));</span><br><span class="line">        <span class="comment">//不为空就保存</span></span><br><span class="line">        multipartFile.transferTo(<span class="keyword">new</span> File(<span class="string">&quot;D:\\idea\\IdeaRepository\\项目\\work\\Boot_03_File\\cache\\&quot;</span> + filename + fileType));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (many.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span> (MultipartFile multipartFile1 : many) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!multipartFile1.isEmpty())&#123;</span><br><span class="line">                String filename = UUID.randomUUID().toString();</span><br><span class="line">                String fileOriginalFilename = multipartFile.getOriginalFilename();</span><br><span class="line">                String fileType = fileOriginalFilename.substring(fileOriginalFilename.lastIndexOf(<span class="string">&#x27;.&#x27;</span>));</span><br><span class="line">                multipartFile1.transferTo(<span class="keyword">new</span> File(<span class="string">&quot;D:\\idea\\IdeaRepository\\项目\\work\\Boot_03_File\\cache\\&quot;</span> + filename + fileType));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;提交成功&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-出现的问题"><a href="#4-出现的问题" class="headerlink" title="4.出现的问题"></a>4.出现的问题</h3><p>单个文件大小超量 总文件大小超量</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#通过配置更改</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#单个文件最大值</span></span><br><span class="line"><span class="string">spring.servlet.multipart.max-file-size=10MB</span></span><br><span class="line"><span class="comment">#总文件最大值</span></span><br><span class="line"><span class="string">spring.servlet.multipart.max-request-size=100MB</span></span><br></pre></td></tr></table></figure>

<h2 id="5）异常处理"><a href="#5）异常处理" class="headerlink" title="5）异常处理"></a>5）异常处理</h2><h3 id="1-默认规则"><a href="#1-默认规则" class="headerlink" title="1.默认规则"></a>1.默认规则</h3><ul>
<li>默认情况下，springboot提供/error处理所有错误的映射</li>
<li>对于机器客户端，它将生成json响应，其中包含错误，HTTP状态和异常消息的详细信息。对于浏览器客户端响应一个包含同样内容的错误视图，以html格式呈现</li>
<li>要对其进行自定义，添加View解析为error</li>
<li>要完全替换默认行为，可以实现ErrorController并注册该类型的Bean定义，或添加ErrorAttributes类型的组件以使用现有机制替换其内容</li>
<li>error/下的4xx，5xx页面会被自动解析</li>
</ul>
<h3 id="2-错误配置类"><a href="#2-错误配置类" class="headerlink" title="2.错误配置类"></a>2.错误配置类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ErrorMvcAutoConfiguration</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;$&#123;server.error.path:$&#123;error.path:/error&#125;&#125;&quot;)</span></span><br><span class="line"><span class="comment">//配置请求为server.error.path 没有就为error.path 没有就为/error</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BasicErrorController</span> <span class="keyword">extends</span> <span class="title">AbstractErrorController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="comment">//WhitelabelErrorViewConfiguration</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> StaticView defaultErrorView = <span class="keyword">new</span> StaticView();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = &quot;error&quot;)</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean(name = &quot;error&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">defaultErrorView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.defaultErrorView;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//DefaultErrorViewResolver 配置了异常处理视图</span></span><br></pre></td></tr></table></figure>

<h3 id="3-自定义异常"><a href="#3-自定义异常" class="headerlink" title="3.自定义异常"></a>3.自定义异常</h3><p>springmvc使用 全局异常</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalException</span> </span>&#123;</span><br><span class="line"> 	<span class="comment">//捕获的异常类型</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(&#123;ArithmeticException.class&#125;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">exception</span><span class="params">(Exception e)</span></span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;异常是：&#123;&#125;&quot;</span>,e.getMessage());</span><br><span class="line"> 		<span class="comment">//配置返回视图 默认异常会去找 </span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;/error/404.html&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>自定义类型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * code响应状态码</span></span><br><span class="line"><span class="comment"> * reason:异常的说明</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@ResponseStatus(code = HttpStatus.BAD_REQUEST,reason = &quot;错误信息！！！&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UserException</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//配置全局捕获</span></span><br><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalException</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ExceptionHandler(&#123;UserException.class&#125;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">exception1</span><span class="params">(Exception e)</span></span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;UserException 异常是：&#123;&#125;&quot;</span>,e.getMessage());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;/error/500.html&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6）原生组件注入"><a href="#6）原生组件注入" class="headerlink" title="6）原生组件注入"></a>6）原生组件注入</h2><p><strong>方式一：</strong></p>
<ul>
<li>创建HttpServlet子类并标注@WebServlet注解与请求路径 在主配置类上标注@ServletComponentScan与扫描的包路径</li>
<li>创建Filter接口的实现类 标注@@WebFilter并配置路径 也需要@ServletComponentScan扫描到它<ul>
<li>注意 serlvet中拦截所有是<code>*</code></li>
<li>springmvc中是<code>**</code></li>
</ul>
</li>
<li>创建一个监听器（测试使用的ServletContextListener）的实现类 标注@WebListener注解  也需要@ServletComponentScan扫描到它</li>
</ul>
<p><strong>方式二：</strong></p>
<p>创建配置类 在配置类中生成对应的RegistrationBean即可</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletRegistrationBean&lt;MyServlet&gt; <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        MyServlet servlet = <span class="keyword">new</span> MyServlet();</span><br><span class="line">        ServletRegistrationBean&lt;MyServlet&gt; registrationBean = <span class="keyword">new</span> ServletRegistrationBean&lt;&gt;();</span><br><span class="line">        registrationBean.setServlet(servlet);   <span class="comment">//设置处理servlet</span></span><br><span class="line">        registrationBean.setUrlMappings(Arrays.asList(<span class="string">&quot;/test&quot;</span>,<span class="string">&quot;/aaa&quot;</span>));<span class="comment">//设置映射路径</span></span><br><span class="line">        <span class="keyword">return</span> registrationBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> FilterRegistrationBean&lt;MyFilter&gt; <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        MyFilter myFilter = <span class="keyword">new</span> MyFilter();</span><br><span class="line">        FilterRegistrationBean&lt;MyFilter&gt; registrationBean = <span class="keyword">new</span> FilterRegistrationBean&lt;&gt;();</span><br><span class="line">        registrationBean.setFilter(myFilter);   <span class="comment">//配置过滤器</span></span><br><span class="line">        registrationBean.setUrlPatterns(Arrays.asList(<span class="string">&quot;/test&quot;</span>,<span class="string">&quot;/aaa&quot;</span>)); <span class="comment">//配置过滤路径 有多种过滤方式</span></span><br><span class="line">        <span class="keyword">return</span> registrationBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletListenerRegistrationBean&lt;MyListener&gt; <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">        MyListener myListener = <span class="keyword">new</span> MyListener();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ServletListenerRegistrationBean&lt;&gt;(myListener);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>请求有精确优先原则</strong></p>
<h1 id="9、数据访问"><a href="#9、数据访问" class="headerlink" title="9、数据访问"></a>9、数据访问</h1><p>依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- mysql依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- springboot jdbc依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="1-数据配置"><a href="#1-数据配置" class="headerlink" title="1.数据配置"></a>1.数据配置</h2><p>通过查找自动配置类可以发现</p>
<img src="/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210522184155648.png" class="">

<h2 id="2-使用Druid数据源"><a href="#2-使用Druid数据源" class="headerlink" title="2.使用Druid数据源"></a>2.使用Druid数据源</h2><h3 id="1）druid官方地址"><a href="#1）druid官方地址" class="headerlink" title="1）druid官方地址"></a>1）druid官方地址</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//https://github.com/alibaba/druid</span></span><br><span class="line"><span class="comment">//https://gitee.com/wenshao/druid/tree/master/?utm_source=alading&amp;utm_campaign=commitUrl</span></span><br></pre></td></tr></table></figure>

<h3 id="2）自定义配置"><a href="#2）自定义配置" class="headerlink" title="2）自定义配置"></a>2）自定义配置</h3><h3 id="2）使用start进行配置"><a href="#2）使用start进行配置" class="headerlink" title="2）使用start进行配置"></a>2）使用start进行配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>自动配置信息：</strong></p>
<ul>
<li>自定义的配置类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(&quot;spring.datasource.druid&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DruidStatProperties</span> </span>&#123;</span><br></pre></td></tr></table></figure>

<ul>
<li>导入其他类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import(&#123;DruidSpringAopConfiguration.class,		//监控springBean的 </span></span><br><span class="line"><span class="meta">    DruidStatViewServletConfiguration.class,	//监控页的配置</span></span><br><span class="line"><span class="meta">    DruidWebStatFilterConfiguration.class,		//web监控的配置</span></span><br><span class="line"><span class="meta">    DruidFilterConfiguration.class&#125;)</span>			<span class="comment">//所有druid自己的配置</span></span><br></pre></td></tr></table></figure>

<p><strong>配置：</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/jdbctest?serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line"><span class="comment">#druid的一些配置</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="attr">filters:</span> <span class="string">stat,wall</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">stat-view-servlet:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">login-username:</span> <span class="string">admin</span></span><br><span class="line">        <span class="attr">login-password:</span> <span class="string">admin</span></span><br><span class="line"></span><br><span class="line">      <span class="attr">web-stat-filter:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">url-pattern:</span> <span class="string">/*</span></span><br><span class="line">        <span class="attr">exclusions:</span> <span class="string">&#x27;*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*&#x27;</span></span><br><span class="line">      <span class="attr">filter:</span></span><br><span class="line">        <span class="attr">stat:</span></span><br><span class="line">          <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">log-slow-sql:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">slow-sql-millis:</span> <span class="number">1000</span></span><br><span class="line">        <span class="attr">wall:</span></span><br><span class="line">          <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h2 id="3-整合mybatis"><a href="#3-整合mybatis" class="headerlink" title="3.整合mybatis"></a>3.整合mybatis</h2><p>导入依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 可以安装mybatisX插件拿到对应的映射 --&gt;</span></span><br></pre></td></tr></table></figure>

<p>创建核心配置文件与mapper映射文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span>		<span class="comment">//接口一定要带上Mapper注解</span></span><br><span class="line"><span class="comment">//也可以在配置类在标注 MapperScan 扫描mapper所在的包 就不用给所有Mapper加上注解</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">StudentMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">Student <span class="title">getStudentById</span><span class="params">(String id)</span></span>;</span><br><span class="line">    <span class="comment">//也可以在方法上用注解  一样的 options可以设置一些项</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//映射文件</span></span><br><span class="line">&lt;mapper namespace=<span class="string">&quot;edu.hbut.mapper.StudentMapper&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- <span class="function">Student <span class="title">getStudentById</span><span class="params">(String id)</span></span>; --&gt;</span><br><span class="line">    &lt;select id=<span class="string">&quot;getStudentById&quot;</span> resultType=<span class="string">&quot;edu.hbut.pojo.Student&quot;</span>&gt;</span><br><span class="line">        select * from student where id = #&#123;id&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>

<p>配置相关</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="comment">#config-location: #核心配置文件路径</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mybatis/mapper/*.xml</span>  <span class="comment">#mapper映射文件位置</span></span><br></pre></td></tr></table></figure>

<p>测试即可</p>
<h2 id="4-mybatisPlus"><a href="#4-mybatisPlus" class="headerlink" title="4.mybatisPlus"></a>4.mybatisPlus</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//官网：https://mp.baomidou.com/guide/</span></span><br></pre></td></tr></table></figure>

<p>导入依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 可以查看到所有的配置都在mybatis-plus下 --&gt;</span></span><br></pre></td></tr></table></figure>

<p>通过查看maven可以发现 里面包含了<strong>mybatis与springj-jdbc</strong>的包 所以可以不用导入这两个</p>
<img src="/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210523101457242.png" class="">

<p>测试案例</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> <span class="keyword">user</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">user</span></span><br><span class="line">(</span><br><span class="line">	id <span class="type">BIGINT</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">	name <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">	age <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">	email <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;邮箱&#x27;</span>,</span><br><span class="line">	<span class="keyword">PRIMARY</span> KEY (id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> <span class="keyword">user</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">user</span> (id, name, age, email) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>, <span class="string">&#x27;Jone&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;test1@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>, <span class="string">&#x27;Jack&#x27;</span>, <span class="number">20</span>, <span class="string">&#x27;test2@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">3</span>, <span class="string">&#x27;Tom&#x27;</span>, <span class="number">28</span>, <span class="string">&#x27;test3@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">4</span>, <span class="string">&#x27;Sandy&#x27;</span>, <span class="number">21</span>, <span class="string">&#x27;test4@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">5</span>, <span class="string">&#x27;Billie&#x27;</span>, <span class="number">24</span>, <span class="string">&#x27;test5@baomidou.com&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><strong>通用Mapper</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建接口去继承mybatisplus 的通用Mapper即可</span></span><br><span class="line"><span class="comment">//里面包含了一些基本的增删改查 一些其他的配置可以去查看官方文档</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>通用Service</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//service接口  需要继承通用Service接口 让多态能够获取到方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IUserService</span> <span class="keyword">extends</span> <span class="title">IService</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//service实现类</span></span><br><span class="line"><span class="comment">//ServiceImpl&lt;UserMapper,User&gt;  泛型1 通用Mapper实现类 2 需要操作的实体类</span></span><br><span class="line"><span class="meta">@Service</span>	</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">UserMapper</span>,<span class="title">User</span>&gt; <span class="keyword">implements</span> <span class="title">IUserService</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>分页</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入配置然后调用方法即可</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisPlusConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新的分页插件,一缓和二缓遵循mybatis的规则,需要设置 MybatisConfiguration#useDeprecatedExecutor = false 避免缓存出现问题(该属性会在旧插件移除后一同移除)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MybatisPlusInterceptor <span class="title">mybatisPlusInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        MybatisPlusInterceptor interceptor = <span class="keyword">new</span> MybatisPlusInterceptor();</span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> PaginationInnerInterceptor(DbType.H2));</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//测试</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mybatisPlusTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//当前第几页 每页多少条</span></span><br><span class="line">    Page&lt;User&gt; page = <span class="keyword">new</span> Page&lt;&gt;(<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line">    <span class="comment">//分页对象  条件对象</span></span><br><span class="line">    Page&lt;User&gt; userPage = mapper.page(page,<span class="keyword">null</span>);</span><br><span class="line">    System.out.println(userPage.getRecords());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5、redis"><a href="#5、redis" class="headerlink" title="5、redis"></a>5、redis</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用阿里云redis服务器 https://www.aliyun.com/ss/?k=redis</span></span><br></pre></td></tr></table></figure>

<h3 id="1）导入使用"><a href="#1）导入使用" class="headerlink" title="1）导入使用"></a>1）导入使用</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在spring自动配置包中找到对应的配置类 查看连接信息</p>
<img src="/2021/09/20/%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF/SpringBoot/image-20210609162024689.png" class="">

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"> <span class="attr">redis:</span></span><br><span class="line"> 	<span class="attr">url:</span> <span class="string">redis://user:password@example.com:6379</span></span><br><span class="line"> 	<span class="comment">#redis://[用户名]:[密码]@[连接地址]:[端口号]</span></span><br><span class="line"> 	</span><br><span class="line"> 	<span class="comment">#测试不通过可以分开写</span></span><br><span class="line"> 	<span class="attr">host:</span> <span class="string">example.com</span></span><br><span class="line"> 	<span class="attr">prot:</span> <span class="number">6379</span></span><br><span class="line"> 	<span class="attr">passowrd:</span> <span class="string">user:password</span></span><br></pre></td></tr></table></figure>

<h3 id="2）测试代码"><a href="#2）测试代码" class="headerlink" title="2）测试代码"></a>2）测试代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">StringRedisTemplate template;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ValueOperations&lt;String, String&gt; ops = template.opsForValue();</span><br><span class="line">    ops.set(<span class="string">&quot;key1&quot;</span>,<span class="string">&quot;value1&quot;</span>);</span><br><span class="line">    System.out.println(ops.get(<span class="string">&quot;key1&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3）切换至jedis客户端"><a href="#3）切换至jedis客户端" class="headerlink" title="3）切换至jedis客户端"></a>3）切换至jedis客户端</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 导入依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4）filter和interceptor的区别"><a href="#4）filter和interceptor的区别" class="headerlink" title="4）filter和interceptor的区别"></a>4）filter和interceptor的区别</h3><ol>
<li>Filter是Servlet定义的原生组件。好处，脱离Spring应用也能使用</li>
<li>Interceptor是spring定义的接口。可以使用Spring的自动装配等功能</li>
</ol>
<h1 id="10、遇到的问题"><a href="#10、遇到的问题" class="headerlink" title="10、遇到的问题"></a>10、遇到的问题</h1><h2 id="1）maven打包失败"><a href="#1）maven打包失败" class="headerlink" title="1）maven打包失败"></a>1）maven打包失败</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置打包 使用install 或者 package即可 --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.7.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>xxxx<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">id</span>&gt;</span>repackage<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>repackage<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="11、服务器运用"><a href="#11、服务器运用" class="headerlink" title="11、服务器运用"></a>11、服务器运用</h1><h2 id="1）linux运行springboot-jar包项目"><a href="#1）linux运行springboot-jar包项目" class="headerlink" title="1）linux运行springboot jar包项目"></a>1）linux运行springboot jar包项目</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"><span class="comment">#功能简介：启动app.jar 文件</span></span><br><span class="line"><span class="comment">#注意：在sh文件中=赋值，左右两侧不能有空格</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#运行示例： ./run.sh start</span></span><br><span class="line"></span><br><span class="line">APP=boot-exercise-0.0.1-SNAPSHOT	<span class="comment">#程序名称</span></span><br><span class="line">APP_NAME=<span class="variable">$&#123;APP&#125;</span><span class="string">&quot;.jar&quot;</span>			   <span class="comment">#附带上.jar	</span></span><br><span class="line"></span><br><span class="line">log_dir=./logs						<span class="comment">#日志目录</span></span><br><span class="line">log_file=./logs/pro.log				<span class="comment">#日志文件</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">command</span>=<span class="variable">$1</span>						<span class="comment">#command等于输入</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">start</span></span>()&#123;</span><br><span class="line">    <span class="comment"># 日志文件夹不存在，则创建</span></span><br><span class="line">    <span class="keyword">if</span> [ ! -d <span class="string">&quot;<span class="variable">$&#123;log_dir&#125;</span>&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">        mkdir <span class="string">&quot;<span class="variable">$&#123;log_dir&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    rm -f tpid</span><br><span class="line">    nohup java -jar <span class="variable">$&#123;APP_NAME&#125;</span> &gt; <span class="string">&quot;<span class="variable">$&#123;log_file&#125;</span>&quot;</span> 2&gt;&amp;1 &amp;	<span class="comment">#运行指定项目 将日志写入指定文件中</span></span><br><span class="line">    <span class="built_in">echo</span> $! &gt; tpid</span><br><span class="line">    check</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">stop</span></span>()&#123;</span><br><span class="line">    tpid=`ps -ef|grep <span class="variable">$APP_NAME</span>|grep -v grep|grep -v <span class="built_in">kill</span>|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$&#123;tpid&#125;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&#x27;stop process...&#x27;</span></span><br><span class="line">        <span class="built_in">kill</span> -15 <span class="variable">$tpid</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    sleep 3</span><br><span class="line"></span><br><span class="line">    tpid=`ps -ef|grep <span class="variable">$APP_NAME</span>|grep -v grep|grep -v <span class="built_in">kill</span>|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$&#123;tpid&#125;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&#x27;Kill Process!&#x27;</span></span><br><span class="line">        <span class="built_in">kill</span> -9 <span class="variable">$tpid</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&#x27;Stop Success!&#x27;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">check</span></span>()&#123;</span><br><span class="line">    tpid=`ps -ef|grep <span class="variable">$APP_NAME</span>|grep -v grep|grep -v <span class="built_in">kill</span>|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$&#123;tpid&#125;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&#x27;App is running.&#x27;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&#x27;App is NOT running.&#x27;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 强制kill进程</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">forcekill</span></span>()&#123;</span><br><span class="line">    tpid=`ps -ef|grep <span class="variable">$APP_NAME</span>|grep -v grep|grep -v <span class="built_in">kill</span>|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$&#123;tpid&#125;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&#x27;Kill Process!&#x27;</span></span><br><span class="line">        <span class="built_in">kill</span> -9 <span class="variable">$tpid</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出进程号</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">showtpid</span></span>()&#123;</span><br><span class="line">    tpid=`ps -ef|grep <span class="variable">$APP_NAME</span>|grep -v grep|grep -v <span class="built_in">kill</span>|awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>`</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$&#123;tpid&#125;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&#x27;process &#x27;</span><span class="variable">$APP_NAME</span><span class="string">&#x27; tpid is &#x27;</span><span class="variable">$tpid</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&#x27;process &#x27;</span><span class="variable">$APP_NAME</span><span class="string">&#x27; is not running.&#x27;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$&#123;command&#125;</span>&quot;</span> ==  <span class="string">&quot;start&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    start</span><br><span class="line"></span><br><span class="line"><span class="keyword">elif</span> [ <span class="string">&quot;<span class="variable">$&#123;command&#125;</span>&quot;</span> ==  <span class="string">&quot;stop&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">     stop</span><br><span class="line"></span><br><span class="line"><span class="keyword">elif</span> [ <span class="string">&quot;<span class="variable">$&#123;command&#125;</span>&quot;</span> ==  <span class="string">&quot;check&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">     check</span><br><span class="line"></span><br><span class="line"><span class="keyword">elif</span> [ <span class="string">&quot;<span class="variable">$&#123;command&#125;</span>&quot;</span> ==  <span class="string">&quot;kill&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">     forcekill</span><br><span class="line"></span><br><span class="line"><span class="keyword">elif</span> [ <span class="string">&quot;<span class="variable">$&#123;command&#125;</span>&quot;</span> == <span class="string">&quot;tpid&quot;</span> ];<span class="keyword">then</span></span><br><span class="line">     showtpid</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Unknow argument....&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="2）windows文件赋值到linux运行失败"><a href="#2）windows文件赋值到linux运行失败" class="headerlink" title="2）windows文件赋值到linux运行失败"></a>2）windows文件赋值到linux运行失败</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//出现问题：-bash: ./xxx.sh: /bin/sh^M: bad interpreter: No such file or directory</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//修改换行格式</span></span><br><span class="line"><span class="comment">//	sed -i -e &#x27;s/\r$//&#x27;  [filename].sh</span></span><br></pre></td></tr></table></figure>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%90%8E%E7%AB%AF/" rel="tag"># 后端</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/09/20/%E5%BC%80%E5%8F%91/%E5%89%8D%E7%AB%AF/vue%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" rel="prev" title="vue基本使用">
                  <i class="fa fa-chevron-left"></i> vue基本使用
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/09/22/web%E5%AE%89%E5%85%A8/SQL%E6%B3%A8%E5%85%A5%E7%AF%87/oracle%E6%B3%A8%E5%85%A5/" rel="next" title="oracle注入">
                  oracle注入 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">xf</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
